---
layout: text
math: true
section: math
title: "Invertible modules"
permalink: /invertible-modules
desc: A proof that invertible modules are the same thing as line
      bundles.
preamble:
- [c, 0, '\colon']
- [ce, 0, '\mathrel{:=}']
- [id, 0, '\mathrm{id}']
- [Spec, 0, '\opname{Spec}']
- [Pic, 0, '\opname{Pic}']
- [p, 0, '\mathfrak{p}']
- [m, 0, '\mathfrak{m}']
---

Let $A$ be a commutative ring.

\begin{lemma}{trivial-point-to-open}
  Let $M$ be a finitely generated $A$-module. If $M_\p \iso 0$ for
  some $\p \in \Spec(A)$, then $M_f \iso 0$ for some $f \in A - \p$.
\end{lemma}

\begin{proof}
  Choose generators $x_1,\ldots,x_n \in M$. If $M_\p \iso 0$ then
  there are $f_1,\ldots,f_n \in A - \p$ such that $f_ix_i = 0$ for $1
  \le i \le n$. Taking $f \ce \prod_{i=1}^n f_i \in A - \p$, we have
  $fM \iso 0 \implies M_f \iso 0$.
\end{proof}

\begin{lemma}{locally-free-point-to-open}
  Let $M$ be a finitely generated $A$-module. Then $M$ is locally free
  of finite rank if and only if $M_\p$ is a finite free $A_\p$-module
  for each $\p \in \Spec(A)$.
\end{lemma}

\begin{proof}
  The only if direction is obvious, so assume $M_\p$ is a finite free
  $A_\p$-module for each $\p \in \Spec(A)$. Fixing $\p \in \Spec(A)$,
  it suffices to show there exists $f \in A - \p$ such that $M_f$ is a
  free $A_f$-module. We have an isomorphism $A_\p^n \iso M_\p$,
  which without loss of generality is the localisation of a morphism
  $\alpha \c A^n \to M$. It follows from \ref{trivial-point-to-open}
  that since $\alpha_\p$ is an isomorphim, so is $\alpha_f$ for some
  $f \in A - \p$.
\end{proof}

\begin{definition}
  We say an $A$-module $M$ is *invertible* if there exists an
  $A$-module $N$ and an isomorphism $M \otimes_A N \iso A$.
\end{definition}

\begin{lemma}{invertible-module-finitely-generated}
  An invertible $A$-module $M$ is finitely generated.
\end{lemma}

\begin{proof}
  Assume we have an $A$-module $N$ and an isomorphism $\alpha \c A
  \iso M \otimes_A N$. Observe the image of $\alpha$ must be
  generated by a single element of $M \otimes_A N$, so $\alpha$ must
  factor through an isomorphism $\beta \c A \iso M_0 \otimes_A N$
  for some finitely generated submodule $M_0 \subseteq M$. Then we
  have an isomorphism
  \[
  \begin{xy}
  \xymatrix{
    M \ar[d]^{\sim} \ar[rrr]^{\sim} & & & M_0 \ar[d]^{\sim} \\ M
    \otimes_A A \ar[r]^{\id \otimes \beta} & M \otimes_A M_0 \otimes_A
    N \ar[r]^{\sim} & M \otimes_A N \otimes_A M_0 \ar[r]^{\alpha^{-1}
    \otimes \id} & A \otimes_A M_0.
  }
  \end{xy}
  \qedhere
  \]
\end{proof}

\begin{lemma}{invertible-locally-free}
  An $A$-module $M$ is invertible if and only if $M$ is locally free
  of rank $1$.
\end{lemma}

\begin{proof}
  First assume $M$ is invertible: there is an $A$-module $N$ such that
  $M \otimes_A N \iso A$. Fix any $\p \in \Spec(A)$. By
  \ref{locally-free-point-to-open} it suffices to show $M_\p$ is free
  of rank $1$ over $A_\p$. We have
  \[
  M_\p \otimes_{A_\p} N_\p \iso (M \otimes N)_\p \iso A_\p,
  \]
  i.e. $M_\p$ is invertible. Thus we are reduced to the case that $A$
  is a local ring. Let $\m \in \Spec(A)$ denote the maximal ideal and
  $k \ce A/\m$ the residue field. We have
  \[
  (M \otimes_A k) \otimes_k (N \otimes_A k) \iso M \otimes_A N
  \otimes_A k \iso k,
  \]
  i.e. $M \otimes_A k$ is an invertible $k$-module. But $k$ is a field
  so obviously this implies $M/\m M \iso M \otimes_A k \iso k$. Let $x
  \in M$ be a lift of a generator of $M/\m M$ and $\alpha \c A \to M$
  the map defined by $1 \mapsto x$. By construction the induced map
  $\alpha \otimes k \c k \to M \otimes_A k$ is an isomorphism.  Then
  Nakayama's lemma implies $\alpha$ is an isomorphism.

  Conversely, assume $M$ is locally free of rank $1$. Let $M^\vee \ce
  \hom_A(M, A)$ denote the dual of $M$ and consider the canonical
  evaluation map $M \otimes_A M^\vee \to A$. By hypothesis this
  morphism locally looks like\footnote{I'm also using that locally
    free implies finitely presented, which implies that dualising will
    commute with localisation.} evaluation $A \otimes_A A^\vee \to A$,
  which is clearly an isomorphism. This finishes the proof.
\end{proof}

\begin{definition}
  It follows from \ref{invertible-module-finitely-generated} that the
  collection $\Pic(A)$ of isomorphism classes of invertible modules
  forms a set. Under tensor product $\Pic(A)$ forms an abelian group
  called the *Picard group* of $A$. Note that by the proof of
  \ref{invertible-locally-free} the inverse in $\Pic(A)$ of (the
  isomorphism class) of an invertible module $L$ is given by (the
  isomorphism class of) the dual $L^\vee$.
\end{definition}

\begin{lemma}{graded-ring-invertible-components}
  Let $A_*$ be a graded ring. Let $\otimes$ denote
  $\otimes_{A_0}$. Assume there is an isomorphism of $A_0$-modules
  $A_1 \otimes A_{-1} \iso A_0$. Then for $n \ge 1$ we have
  \[
  A_n \iso A_1^{\otimes n} \quad\text{and}\quad
  A_{-n} \iso A_{-1}^{\otimes n} \iso (A_1^\vee)^{\otimes n}.
  \]
\end{lemma}

\begin{proof}
  We inductively prove the statement for $n \ge 1$. We just prove the
  first isomorphism, the second is symmetric. The case $n=1$ is
  tautological. Let $n > 1$. Multiplication gives a map $A_1^{\otimes
    n} \to A_n$. An inverse map is given by
  \[
  A_n \iso A_n \otimes A_0 \iso A_n \otimes A_{-1} \otimes A_1 \to
  A_{n-1} \otimes A_1 \iso A_1^{\otimes n},
  \]
  the last isomorphism coming from the inductive hypothesis. The case
  $n \le -1$ is symmetric.
\end{proof}
